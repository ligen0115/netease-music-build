{"version":3,"sources":["api/song_menu.js","view/home/components/topBar/index.jsx","view/home/components/recommend/songList/index.jsx","view/home/components/recommend/index.jsx","api/banner.js","view/home/components/singer/index.jsx","view/home/components/ranking/index.jsx","api/ranking.js","utils/LazyLoading.js","view/home/index.jsx"],"names":["getHotSongMenu","apiCache","request","method","url","params","t","Date","now","getDetails","id","dispose","getPlaylist","topBar","state","className","mode","icon","type","onLeftClick","rightContent","key","style","marginRight","onClick","props","history","push","React","Component","withRouter","songList","this","getSongList","item","res","setState","result","console","log","ref","val","recommend","length","map","index","songMenu","src","alt","data-url","picUrl","name","Math","ceil","playCount","bannerList","getBanners","banners","onTouchMove","e","stopPropagation","autoplay","infinite","display","width","height","imageUrl","verticalAlign","onLoad","window","dispatchEvent","Event","imgHeight","isLoad","Item","singer","letterIndex","data","letter","split","singerList","_index","loadList","cat","initial","undefined","document","getElementById","scrollTop","isReload","singerType","artists","onTouchStart","screen","letterScreen","thumb","Brief","ranking","authorityList","globalList","getRanking","list","slice","forEach","getSongMenu","arr","tags","playlist","tracks","coverImgUrl","hasLine","columnNum","renderItem","borderRadius","color","fontSize","marginTop","updateFrequency","LazyLoading","placeholder","windowHei","innerHeight","init","ele","box","parentNode","getNodeLise","imgArr","querySelectorAll","setTimeout","getAttribute","setAttribute","addEventListener","throttle","y","removeAttribute","children","tabs","title","sub","home","initialPage","tabBarBackgroundColor","tabBarInactiveTextColor","tabBarActiveTextColor","swipeable","prerenderingSiblingsNumber","alignItems","justifyContent","backgroundColor","ganking"],"mappings":"0HAAA,0HAGA,SAASA,IACP,OAAOC,aAAS,WACd,OAAOC,YAAQ,CACbC,OAAQ,MACRC,IAAK,gBACLC,OAAQ,CACNC,EAAGC,KAAKC,WALC,iBAWjB,SAASC,EAAWC,GAClB,OAAOT,aAAS,WACd,OAAOC,YAAQ,CACbC,OAAQ,MACRC,IAAK,mBACLC,OAAQ,CACNK,KACAJ,EAAGC,KAAKC,WANC,0BASOG,YAAQ,CAAED,SAGlC,SAASE,EAAYF,GACnB,OAAOT,aAAS,WACd,OAAOC,YAAQ,CACbC,OAAQ,MACRC,IAAK,iBACLC,OAAQ,CACNK,KACAJ,EAAGC,KAAKC,WANC,wBASKG,YAAQ,CAAED,W,wVCjC1BG,G,kNACFC,MAAQ,G,wEACE,IAAD,OACL,OACI,yBAAKC,UAAU,UACX,uBACIC,KAAK,QACLC,KAAM,uBAAMC,KAAK,aACjBC,YAAa,aACbC,aAAc,CACV,uBACIC,IAAI,IACJH,KAAK,SACLI,MAAO,CAAEC,YAAa,QACtBC,QAAS,WACL,EAAKC,MAAMC,QAAQC,KAAK,gBAVxC,2B,GALKC,IAAMC,YA2BZC,cAAWjB,G,+GC3BpBkB,E,2MACJjB,MAAQ,CACNiB,SAAU,I,mFAGVC,KAAKC,gB,+BAEEC,GACPF,KAAKP,MAAMC,QAAQC,KAAK,aAAeO,EAAKxB,M,6KAI1BV,c,OAAZmC,E,OACJH,KAAKI,SAAS,CACZL,SAAUI,EAAIE,S,gDAGhBC,QAAQC,IAAR,M,8IAGM,IAAD,OACP,OACE,yBAAKxB,UAAU,WAAWyB,IAAK,SAAAC,GAAG,OAAK,EAAKC,UAAYD,IACtD,yBAAK1B,UAAU,SAAf,4BACA,6BACE,wBAAIA,UAAU,QACXiB,KAAKlB,MAAMiB,SAASY,OAAS,GAC5BX,KAAKlB,MAAMiB,SAASa,KAAI,SAACV,EAAMW,GAC7B,OACE,wBAAIxB,IAAKwB,EAAOrB,QAAS,kBAAM,EAAKsB,SAASZ,KAC3C,yBAAKnB,UAAU,UACb,yBAAKgC,IAAI,GAAGC,IAAI,GAAGC,WAAUf,EAAKgB,UAEpC,yBAAKnC,UAAU,QAAQmB,EAAKiB,MAC5B,uBAAGpC,UAAU,sBAAb,IAAoCqC,KAAKC,KAAKnB,EAAKoB,UAAY,KAA/D,qB,GAlCG1B,IAAMC,WA6CdC,cAAWC,G,YC5CLW,E,2MACjB5B,MAAQ,CACJyC,WAAY,M,mFAGZvB,KAAKwB,e,4KCTMtC,EDcmB,CACtBA,KAAM,GCdbhB,YAAQ,CACbC,OAAQ,MACRC,IAAK,UACLC,OAAQ,CACNa,OACAZ,EAAGC,KAAKC,S,ODQE2B,E,OAGJH,KAAKI,SAAS,CACVmB,WAAYpB,EAAIsB,U,gDAGpBnB,QAAQC,IAAR,M,kCCrBZ,IAAmBrB,I,yGDyBL,IAAD,OACEqC,EAAcvB,KAAKlB,MAAnByC,WACP,OACI,yBAAKxC,UAAU,YAAYL,GAAG,YAAY8B,IAAK,SAAAC,GAAG,OAAI,EAAKC,UAAYD,IACnE,6BACI,yBAAK1B,UAAU,OACf,yBAAKA,UAAU,WAAW2C,YAAa,SAACC,GAAD,OAAOA,EAAEC,oBAC5C,2BACIL,GAAa,uBACTM,UAAU,EACVC,UAAQ,GAEPP,EAAWX,KAAI,SAACV,EAAMW,GAAP,OACZ,yBACIxB,IAAKwB,EACLvB,MAAO,CACHyC,QAAS,eACTC,MAAO,OACPC,OAAQ,SAGZ,yBACIlB,IAAKb,EAAKgC,SACVlB,IAAI,GACJ1B,MAAO,CACH0C,MAAO,OACPC,OAAQ,OACRE,cAAe,OAEnBC,OAAQ,WAEJC,OAAOC,cACH,IAAIC,MAAM,WAEd,EAAKnC,SAAS,CACVoC,UAAW,mBAS3C,yBAAKzD,UAAU,aACX,kBAAC,EAAD,CAAU0D,OAAQzC,KAAKP,MAAMgD,gB,GAlEd7C,IAAMC,W,4CEAvC6C,EAAO,IAAKA,KAEZC,E,2MACJ7D,MAAQ,CACN+B,MAAO,KACP+B,YAAa,KACbC,KAAM,CACJ,CAAE1B,KAAM,2BAAQN,MAAO,MACvB,CAAEM,KAAM,iCAASN,MAAO,MACxB,CAAEM,KAAM,iCAASN,MAAO,MACxB,CAAEM,KAAM,2BAAQN,MAAO,MACvB,CAAEM,KAAM,iCAASN,MAAO,MACxB,CAAEM,KAAM,iCAASN,MAAO,MACxB,CAAEM,KAAM,2BAAQN,MAAO,MACvB,CAAEM,KAAM,iCAASN,MAAO,MACxB,CAAEM,KAAM,iCAASN,MAAO,MACxB,CAAEM,KAAM,2BAAQN,MAAO,MACvB,CAAEM,KAAM,iCAASN,MAAO,MACxB,CAAEM,KAAM,iCAASN,MAAO,MACxB,CAAEM,KAAM,2BAAQN,MAAO,MACvB,CAAEM,KAAM,iCAASN,MAAO,MACxB,CAAEM,KAAM,iCAASN,MAAO,MACxB,CAAEM,KAAM,2BAAQN,MAAO,OAGzBiC,OAAQ,6BAA6BC,MAAM,IAC3CC,WAAY,I,sEAEPC,GACLjD,KAAKI,SAAS,CAAES,MAAOoC,IACvBjD,KAAKkD,SAAS,CACZC,IAAKnD,KAAKlB,MAAM+D,KAAKI,GAAQpC,MAC7BuC,QAAoC,OAA3BpD,KAAKlB,MAAM8D,YAAuB5C,KAAKlB,MAAMgE,OAAO9C,KAAKlB,MAAM8D,kBAAeS,IACvF,GACFrD,KAAKI,SAAS,CAAE4C,WAAY,O,mCAEjBC,GACXjD,KAAKI,SAAS,CAAEwC,YAAaK,IAC7BjD,KAAKkD,SAAS,CACZC,IAA0B,OAArBnD,KAAKlB,MAAM+B,MAAiBb,KAAKlB,MAAM+D,KAAK7C,KAAKlB,MAAM+B,OAAOA,WAAQwC,EAC3ED,QAASpD,KAAKlB,MAAMgE,OAAOG,KAC3B,GACFjD,KAAKI,SAAS,CAAE4C,WAAY,O,0JAG5BhD,KAAKkD,SAAS,CAAEC,IAAK,QACjBR,EAASW,SAASC,eAAe,WAC9BC,UAAY,EACnBb,EAAOa,UAAY,E,gLAGUC,G,kFAAdN,E,EAAAA,IAAKC,E,EAAAA,Q,kBAEFM,YAAW,CAAEP,MAAKC,Y,OAA9BjD,E,OACJH,KAAKI,SAAS,CAAE4C,WAAY7C,EAAIwD,UAAU,WACxC,GAAIF,EAAU,CACZ,IAAId,EAASW,SAASC,eAAe,UACrCZ,EAAOa,UAAY,EACnBb,EAAOa,UAAY,M,gDAIvBlD,QAAQC,IAAR,M,iJAIM,IAAD,OACP,OACE,yBAAKxB,UAAU,SAASyB,IAAK,SAAAC,GAAG,OAAI,EAAKkC,OAASlC,IAChD,yBAAK/B,GAAG,WAAWK,UAAU,WAAW6E,aAAc,SAACjC,GAAD,OAAOA,EAAEC,oBAC7D,4BACE,wBAAI7C,UAAU,SAAd,2CACCiB,KAAKlB,MAAM+D,KAAKjC,KAAI,SAACV,EAAMW,GAC1B,OACE,wBACErB,QAAS,SAACmC,GAAD,OAAO,EAAKkC,OAAOhD,IAC5BxB,IAAKwB,EACL9B,UAAW8B,IAAU,EAAK/B,MAAM+B,MAAQ,WAAa,IAEpDX,EAAKiB,WAMhB,yBAAKpC,UAAU,SAASL,GAAG,SAASkF,aAAc,SAACjC,GAAD,OAAOA,EAAEC,oBACzD,4BACE,wBAAI7C,UAAU,SAAd,uBACCiB,KAAKlB,MAAMgE,OAAOlC,KAAI,SAACV,EAAMW,GAC5B,OACE,wBACErB,QAAS,kBAAM,EAAKsE,aAAajD,IACjCxB,IAAKwB,EACL9B,UAAW8B,IAAU,EAAK/B,MAAM8D,YAAc,kBAAoB,IAEjE1C,QAMX,yBAAKnB,UAAU,QACb,2BACGiB,KAAKlB,MAAMkE,WAAWpC,KAAI,SAACV,EAAMW,GAChC,OACE,yBAAK9B,UAAU,OAAOM,IAAKwB,GACzB,kBAAC6B,EAAD,CACEqB,MACE,yBACEhD,IAAI,sEACJE,WAAUf,EAAKgB,OACfF,IAAI,KAGRxB,QAAS,WACP,EAAKC,MAAMC,QAAQC,KAAnB,yBAA0CO,EAAKxB,OAGhDwB,EAAKiB,iB,GApHLvB,IAAMC,WAgIZC,cAAW6C,G,4CClI1B,IAAMD,EAAO,IAAKA,KACZsB,EAAQtB,EAAKsB,MAEbC,E,2MACJnF,MAAQ,CACN+D,KAAM,CAAC,EAAG,EAAG,EAAG,EAAG,GACnBqB,cAAe,GACfC,WAAY,I,mFAGZnE,KAAKoE,e,mLCZEnG,aAAS,WACd,OAAOC,YAAQ,CACbC,OAAQ,MACRC,IAAK,WACLC,OAAQ,CACNC,EAAGC,KAAKC,WALC,Y,ODgBT2B,E,OACJH,KAAKI,SAAS,CAAE8D,cAAe/D,EAAIkE,KAAKC,MAAM,EAAG,KAAM,WACrD,EAAKxF,MAAMoF,cAAcK,SAAQ,SAACrE,EAAMW,GACtC,EAAK2D,YAAYtE,EAAKxB,GAAImC,SAG9Bb,KAAKI,SAAS,CAAE+D,WAAYhE,EAAIkE,KAAKC,MAAM,EAAGnE,EAAIkE,KAAK1D,U,gDAEvDL,QAAQC,IAAR,M,0LAGc7B,EAAImC,G,kGAEFpC,YAAWC,G,OAAvByB,E,QACAsE,EAAMzE,KAAKlB,MAAMoF,eACjBrD,GAAO6D,KAAOvE,EAAIwE,SAASC,OAAON,MAAM,EAAG,GAC/CtE,KAAKI,SAAS,CAAE8D,cAAeO,I,gDAE/BnE,QAAQC,IAAR,M,iJAIKL,GACPF,KAAKP,MAAMC,QAAQC,KAAK,aAAeO,EAAKxB,M,+BAEpC,IAAD,OACP,OACE,yBAAKK,UAAU,WACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,SAAf,sBACA,2BACGiB,KAAKlB,MAAMoF,cAActD,KAAI,SAACV,EAAMW,GACnC,OACE,kBAAC,EAAD,CACExB,IAAKwB,EACLkD,MAAO,yBAAKhD,IAAI,GAAGC,IAAI,GAAGC,WAAUf,EAAK2E,cACzCrF,QAAS,WACP,EAAKsB,SAASZ,KAGf,EAAKpB,MAAMoF,cAAcrD,GAAO6D,KAAK9D,KAAI,SAACV,EAAMW,GAC/C,OACE,kBAACmD,EAAD,CAAO3E,IAAKwB,GACTA,EAAQ,EADX,KACgBX,EAAKiB,eASnC,yBAAKpC,UAAU,UACb,yBAAKA,UAAU,SAAf,sBACA,uBACE+F,SAAS,EACTjC,KAAM7C,KAAKlB,MAAMqF,WACjBY,UAAW,EACXC,WAAY,SAAA9E,GAAI,OACd,yBACEV,QAAS,WACP,EAAKsB,SAASZ,KAGhB,yBACEa,IAAI,GACJzB,MAAO,CACL0C,MAAO,OACPC,OAAQ,OACRgD,aAAc,OAEhBhE,WAAUf,EAAK2E,YACf7D,IAAI,KAEN,yBACE1B,MAAO,CACL4F,MAAO,OACPC,SAAU,OACVC,UAAW,SAGb,8BAAOlF,EAAKmF,6B,GA7FVzF,IAAMC,WAyGbC,cAAWmE,G,QE9GLqB,E,2MACnBxG,MAAQ,CACNyG,YAAY,EAAK9F,MAAMsB,KAAO,gGAC9ByE,UAAYnD,OAAOoD,YAAc,K,mFAGjCzF,KAAK0F,S,6BAIL,IAAIC,EAAM3F,KAAK4F,IAAIC,WACnB7F,KAAK8F,YAAYH,K,2EAGDA,G,mFACVH,EAAYxF,KAAKlB,MAAM0G,UAEP,KADlBO,EAASJ,EAAIK,iBAAiB,eACvBrF,O,gCACHsF,YAAW,WACd,EAAKH,YAAYH,KACjB,K,8BAEH3F,KAAKyC,OAAOkD,EAAKH,GACjBO,EAAOxB,SAAQ,SAAArE,GACoB,KAA7BA,EAAKgG,aAAa,QACpBhG,EAAKiG,aAAa,MAAO,EAAKrH,MAAMyG,gBAGxCI,EAAIS,iBAAiB,UAAU,WAC7BC,YAAS,EAAK5D,OAAQ,IAAKkD,EAAKH,M,qIAK/BG,EAAIH,GACIG,EAAIK,iBAAiB,cAC3BzB,SAAQ,SAAArE,GACTA,EAAKoG,EAAId,IACXtF,EAAKiG,aAAa,MAAOjG,EAAKgG,aAAa,aAC3ChG,EAAKqG,gBAAgB,kB,+BAIjB,IAAD,OACP,OAAO,yBAAK/F,IAAK,SAAAC,GAAG,OAAK,EAAKmF,IAAMnF,IAAOT,KAAKP,MAAM+G,c,GA5CjB5G,IAAMC,W,wCCK/C,IAAM4G,EAAO,CAAC,CAAEC,MAAO,eAAMC,IAAK,KAAO,CAAED,MAAO,eAAMC,IAAK,KAAO,CAAED,MAAO,qBAAOC,IAAK,MACpEC,E,iLACT,IAAD,OACP,OACE,yBAAK7H,UAAU,QACb,kBAAC,EAAD,MACA,uBACE0H,KAAMA,EACNI,YAAa,EACbC,sBAAsB,UACtBC,wBAAwB,UACxBC,sBAAsB,UACtBC,WAAW,EACXC,4BAA4B,GAE5B,yBAAKnI,UAAU,UACb,kBAAC,EAAD,KACE,kBAAC,EAAD,QAIJ,yBACEO,MAAO,CACLyC,QAAS,OACToF,WAAY,SACZC,eAAgB,SAChBnF,OAAQ,OACRoF,gBAAiB,YAGnB,yBAAKtI,UAAU,SAASL,GAAG,UACzB,kBAAC,EAAD,CAAaqC,IAAI,gGACf,kBAAC,EAAD,SAMN,yBACEzB,MAAO,CACLyC,QAAS,OACToF,WAAY,SACZC,eAAgB,SAChBnF,OAAQ,OACRoF,gBAAiB,YAGnB,yBAAKtI,UAAU,SAASyB,IAAK,SAAAC,GAAG,OAAK,EAAK6G,QAAU7G,IAClD,kBAAC,EAAD,KACE,kBAAC,EAAD,UAOR,iC,GAvD0Bb,IAAMC","file":"static/js/4.ce16f7ad.chunk.js","sourcesContent":["import request from '../utils/request'\r\nimport { apiCache, dispose } from '../utils/apiCache'\r\n\r\nfunction getHotSongMenu() {\r\n  return apiCache(() => {\r\n    return request({\r\n      method: 'get',\r\n      url: '/personalized',\r\n      params: {\r\n        t: Date.now()\r\n      }\r\n    })\r\n  }, `/personalized`)\r\n}\r\n\r\nfunction getDetails(id) {\r\n  return apiCache(() => {\r\n    return request({\r\n      method: 'get',\r\n      url: '/playlist/detail',\r\n      params: {\r\n        id,\r\n        t: Date.now()\r\n      }\r\n    })\r\n  }, `/playlist/detail${dispose({ id })}`)\r\n}\r\n\r\nfunction getPlaylist(id) {\r\n  return apiCache(() => {\r\n    return request({\r\n      method: 'get',\r\n      url: '/simi/playlist',\r\n      params: {\r\n        id,\r\n        t: Date.now()\r\n      }\r\n    })\r\n  }, `/simi/playlist${dispose({ id })}`)\r\n}\r\n\r\nexport { getHotSongMenu, getDetails, getPlaylist }\r\n","import React from 'react';\r\nimport { NavBar, Icon } from 'antd-mobile';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport './index.scss'\r\n\r\nclass topBar extends React.Component {\r\n    state = {};\r\n    render() {\r\n        return (\r\n            <div className=\"topBar\">\r\n                <NavBar\r\n                    mode=\"light\"\r\n                    icon={<Icon type=\"ellipsis\" />}\r\n                    onLeftClick={() => {}}\r\n                    rightContent={[\r\n                        <Icon\r\n                            key=\"0\"\r\n                            type=\"search\"\r\n                            style={{ marginRight: '16px' }}\r\n                            onClick={() => {\r\n                                this.props.history.push('/search');\r\n                            }}\r\n                        />\r\n                    ]}\r\n                >\r\n                    云音乐\r\n                </NavBar>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(topBar)\r\n","import React from 'react'\r\nimport './index.scss'\r\nimport { getHotSongMenu } from '../../../../../api/song_menu'\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nclass songList extends React.Component {\r\n  state = {\r\n    songList: []\r\n  }\r\n  componentDidMount() {\r\n    this.getSongList()\r\n  }\r\n  songMenu(item) {\r\n    this.props.history.push('/songMenu/' + item.id)\r\n  }\r\n  async getSongList() {\r\n    try {\r\n      let res = await getHotSongMenu()\r\n      this.setState({\r\n        songList: res.result\r\n      })\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className='songList' ref={val => (this.recommend = val)}>\r\n        <div className='title'>推荐歌单</div>\r\n        <div>\r\n          <ul className='List'>\r\n            {this.state.songList.length > 0 &&\r\n              this.state.songList.map((item, index) => {\r\n                return (\r\n                  <li key={index} onClick={() => this.songMenu(item)}>\r\n                    <div className='imgBox'>\r\n                      <img src='' alt='' data-url={item.picUrl} />\r\n                    </div>\r\n                    <div className='text'>{item.name}</div>\r\n                    <i className='iconfont icon-kefu'> {Math.ceil(item.playCount / 10000)}万</i>\r\n                  </li>\r\n                )\r\n              })}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(songList)\r\n","import React from 'react';\r\nimport './index.css';\r\nimport { Carousel, WingBlank } from 'antd-mobile';\r\nimport SongList from './songList';\r\nimport { getBanner } from '../../../../api/banner';\r\n\r\nexport default class recommend extends React.Component {\r\n    state = {\r\n        bannerList: null\r\n    };\r\n    componentDidMount() {\r\n        this.getBanners()\r\n        // this.$lazyLoading(this.recommend)\r\n    }\r\n    async getBanners() {\r\n        try {\r\n            let res = await getBanner({\r\n                type: 1\r\n            });\r\n            this.setState({\r\n                bannerList: res.banners\r\n            });\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        const {bannerList} = this.state\r\n        return (\r\n            <div className=\"recommend\" id=\"recommend\" ref={val => this.recommend = val}>\r\n                <div >\r\n                    <div className=\"bg\"></div>\r\n                    <div className=\"carousel\" onTouchMove={(e) => e.stopPropagation()}>\r\n                        <WingBlank>\r\n                           {bannerList&& <Carousel\r\n                                autoplay={true}\r\n                                infinite\r\n                            >\r\n                                {bannerList.map((item, index) => (\r\n                                    <div\r\n                                        key={index}\r\n                                        style={{\r\n                                            display: 'inline-block',\r\n                                            width: '100%',\r\n                                            height: '40vw'\r\n                                        }}\r\n                                    >\r\n                                        <img\r\n                                            src={item.imageUrl}\r\n                                            alt=\"\"\r\n                                            style={{\r\n                                                width: '100%',\r\n                                                height: '100%',\r\n                                                verticalAlign: 'top'\r\n                                            }}\r\n                                            onLoad={() => {\r\n                                                // fire window resize event to change height\r\n                                                window.dispatchEvent(\r\n                                                    new Event('resize')\r\n                                                );\r\n                                                this.setState({\r\n                                                    imgHeight: 'auto'\r\n                                                });\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                ))}\r\n                            </Carousel>}\r\n                        </WingBlank>\r\n                    </div>\r\n                    <div className=\"song-list\">\r\n                        <SongList isLoad={this.props.isLoad}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import request from '../utils/request'\r\n\r\nfunction getBanner(type) {\r\n  return request({\r\n    method: 'get',\r\n    url: '/banner',\r\n    params: {\r\n      type,\r\n      t: Date.now()\r\n    }\r\n  })\r\n}\r\n\r\nexport { getBanner }\r\n","import React from 'react'\r\nimport './index.scss'\r\nimport { List } from 'antd-mobile'\r\nimport { singerType } from '../../../../api/singer'\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nconst Item = List.Item\r\n\r\nclass singer extends React.Component {\r\n  state = {\r\n    index: null,\r\n    letterIndex: null,\r\n    data: [\r\n      { name: '入驻歌手', index: 5001 },\r\n      { name: '华语男歌手', index: 1001 },\r\n      { name: '华语女歌手', index: 1002 },\r\n      { name: '华语组合', index: 1003 },\r\n      { name: '欧美男歌手', index: 2001 },\r\n      { name: '欧美女歌手', index: 2002 },\r\n      { name: '欧美组合', index: 2003 },\r\n      { name: '日本男歌手', index: 6001 },\r\n      { name: '日本女歌手', index: 6002 },\r\n      { name: '日本组合', index: 6003 },\r\n      { name: '韩国男歌手', index: 7001 },\r\n      { name: '韩国女歌手', index: 7002 },\r\n      { name: '韩国组合', index: 7003 },\r\n      { name: '其他男歌手', index: 4001 },\r\n      { name: '其他女歌手', index: 4002 },\r\n      { name: '其他组合', index: 4003 }\r\n    ],\r\n\r\n    letter: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(''),\r\n    singerList: []\r\n  }\r\n  screen(_index) {\r\n    this.setState({ index: _index })\r\n    this.loadList({\r\n      cat: this.state.data[_index].index,\r\n      initial: this.state.letterIndex !== null ? this.state.letter[this.state.letterIndex] : undefined\r\n    },true)\r\n    this.setState({ singerList: [] })\r\n  }\r\n  letterScreen(_index) {\r\n    this.setState({ letterIndex: _index })\r\n    this.loadList({\r\n      cat: this.state.index !== null ? this.state.data[this.state.index].index : undefined,\r\n      initial: this.state.letter[_index],\r\n    },true)\r\n    this.setState({ singerList: [] })\r\n  }\r\n  async componentDidMount() {\r\n    this.loadList({ cat: 1001 })\r\n    let singer = document.getElementById('singer')\r\n    singer.scrollTop = 1\r\n    singer.scrollTop = 0\r\n  }\r\n\r\n  async loadList({ cat, initial},isReload) {\r\n    try {\r\n      let res = await singerType({ cat, initial })\r\n      this.setState({ singerList: res.artists },()=>{\r\n        if (isReload) {\r\n          let singer = document.getElementById('singer')\r\n          singer.scrollTop = 1\r\n          singer.scrollTop = 0\r\n        }\r\n      })\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='singer' ref={val => this.singer = val}>\r\n        <div id='classify' className='classify' onTouchStart={(e) => e.stopPropagation()}>\r\n          <ul>\r\n            <li className='title'>分类(默认热门):</li>\r\n            {this.state.data.map((item, index) => {\r\n              return (\r\n                <li\r\n                  onClick={(e) => this.screen(index)}\r\n                  key={index}\r\n                  className={index === this.state.index ? 'activate' : ''}\r\n                >\r\n                  {item.name}\r\n                </li>\r\n              )\r\n            })}\r\n          </ul>\r\n        </div>\r\n        <div className='letter' id='letter' onTouchStart={(e) => e.stopPropagation()}>\r\n          <ul>\r\n            <li className='title'>首字母:</li>\r\n            {this.state.letter.map((item, index) => {\r\n              return (\r\n                <li\r\n                  onClick={() => this.letterScreen(index)}\r\n                  key={index}\r\n                  className={index === this.state.letterIndex ? 'letter-activate' : ''}\r\n                >\r\n                  {item}\r\n                </li>\r\n              )\r\n            })}\r\n          </ul>\r\n        </div>\r\n        <div className='list'>\r\n          <List>\r\n            {this.state.singerList.map((item, index) => {\r\n              return (\r\n                <div className='item' key={index}>\r\n                  <Item\r\n                    thumb={\r\n                      <img\r\n                        src='http://img4.imgtn.bdimg.com/it/u=891174751,554927679&fm=26&gp=0.jpg'\r\n                        data-url={item.picUrl}\r\n                        alt=''\r\n                      />\r\n                    }\r\n                    onClick={() => {\r\n                      this.props.history.push(`/singerDetails/${item.id}`)\r\n                    }}\r\n                  >\r\n                    {item.name}\r\n                  </Item>\r\n                </div>\r\n              )\r\n            })}\r\n          </List>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(singer)\r\n","import React from 'react'\r\nimport './index.scss'\r\nimport { List, Grid } from 'antd-mobile'\r\nimport { getRanking } from '../../../../api/ranking'\r\nimport { getDetails } from '../../../../api/song_menu'\r\nimport { withRouter } from 'react-router-dom'\r\nconst Item = List.Item\r\nconst Brief = Item.Brief\r\n\r\nclass ranking extends React.Component {\r\n  state = {\r\n    data: [1, 2, 3, 4, 5],\r\n    authorityList: [],\r\n    globalList: []\r\n  }\r\n  componentDidMount() {\r\n    this.getRanking()\r\n  }\r\n  async getRanking() {\r\n    try {\r\n      let res = await getRanking()\r\n      this.setState({ authorityList: res.list.slice(0, 4) }, () => {\r\n        this.state.authorityList.forEach((item, index) => {\r\n          this.getSongMenu(item.id, index)\r\n        })\r\n      })\r\n      this.setState({ globalList: res.list.slice(4, res.list.length) })\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n  async getSongMenu(id, index) {\r\n    try {\r\n      let res = await getDetails(id)\r\n      let arr = this.state.authorityList\r\n      arr[index].tags = res.playlist.tracks.slice(0, 3)\r\n      this.setState({ authorityList: arr })\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  songMenu(item) {\r\n    this.props.history.push('/songMenu/' + item.id)\r\n  }\r\n  render() {\r\n    return (\r\n      <div className='ranking'>\r\n        <div className='box'>\r\n          <div className='authority'>\r\n            <div className='title'>官方榜</div>\r\n            <List>\r\n              {this.state.authorityList.map((item, index) => {\r\n                return (\r\n                  <Item\r\n                    key={index}\r\n                    thumb={<img src=\"\" alt='' data-url={item.coverImgUrl}/>}\r\n                    onClick={() => {\r\n                      this.songMenu(item)\r\n                    }}\r\n                  >\r\n                    {this.state.authorityList[index].tags.map((item, index) => {\r\n                      return (\r\n                        <Brief key={index}>\r\n                          {index + 1}. {item.name}\r\n                        </Brief>\r\n                      )\r\n                    })}\r\n                  </Item>\r\n                )\r\n              })}\r\n            </List>\r\n          </div>\r\n          <div className='global'>\r\n            <div className='title'>全球榜</div>\r\n            <Grid\r\n              hasLine={false}\r\n              data={this.state.globalList}\r\n              columnNum={3}\r\n              renderItem={item => (\r\n                <div\r\n                  onClick={() => {\r\n                    this.songMenu(item)\r\n                  }}\r\n                >\r\n                  <img\r\n                    src=\"\"\r\n                    style={{\r\n                      width: '100%',\r\n                      height: '100%',\r\n                      borderRadius: '5px'\r\n                    }}\r\n                    data-url={item.coverImgUrl}\r\n                    alt=''\r\n                  />\r\n                  <div\r\n                    style={{\r\n                      color: '#888',\r\n                      fontSize: '14px',\r\n                      marginTop: '12px'\r\n                    }}\r\n                  >\r\n                    <span>{item.updateFrequency}</span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(ranking)\r\n","import request from '../utils/request'\r\nimport { apiCache } from '../utils/apiCache'\r\n\r\nfunction getRanking() {\r\n    return apiCache(() => {\r\n      return request({\r\n        method: 'get',\r\n        url: '/toplist',\r\n        params: {\r\n          t: Date.now()\r\n        }\r\n      })\r\n    }, `/toplist`)\r\n}\r\n\r\nexport { getRanking }\r\n","import React from 'react'\r\nimport throttle from './throttle'\r\n\r\n\r\nexport default class LazyLoading extends React.Component {\r\n  state = {\r\n    placeholder:this.props.src || 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1897943806,295048940&fm=26&gp=0.jpg',\r\n    windowHei : window.innerHeight + 100\r\n  }\r\n  componentDidMount() {\r\n    this.init()\r\n  }\r\n\r\n  init() {\r\n    let ele = this.box.parentNode\r\n    this.getNodeLise(ele)\r\n  }\r\n\r\n  async getNodeLise(ele) {\r\n    const windowHei = this.state.windowHei\r\n    let imgArr = ele.querySelectorAll('[data-url]')\r\n    if (imgArr.length === 0) {\r\n      await setTimeout(() => {\r\n         this.getNodeLise(ele)\r\n      }, 500)\r\n    } else {\r\n      this.isLoad(ele ,windowHei)\r\n      imgArr.forEach(item => {\r\n        if (item.getAttribute('src') === '') {\r\n          item.setAttribute('src', this.state.placeholder)\r\n        }\r\n      })\r\n      ele.addEventListener('scroll', () => {\r\n        throttle(this.isLoad, 200, ele ,windowHei)\r\n      })\r\n    }\r\n  }\r\n\r\n  isLoad(ele,windowHei) {\r\n    let imgArr = ele.querySelectorAll('[data-url]')\r\n    imgArr.forEach(item => {\r\n      if (item.y < windowHei) {\r\n        item.setAttribute('src', item.getAttribute('data-url'))\r\n        item.removeAttribute('data-url')\r\n      }\r\n    })\r\n  }\r\n  render() {\r\n    return <div ref={val => (this.box = val)}>{this.props.children}</div>\r\n  }\r\n}\r\n","import React from 'react'\r\nimport TopBar from './components/topBar'\r\nimport './index.scss'\r\nimport { Tabs, WhiteSpace } from 'antd-mobile'\r\nimport Recommend from './components/recommend'\r\nimport Singer from './components/singer'\r\nimport Ranking from './components/ranking'\r\nimport LazyLoading from '../../utils/LazyLoading'\r\n\r\nconst tabs = [{ title: '推荐', sub: '1' }, { title: '歌手', sub: '2' }, { title: '排行榜', sub: '3' }]\r\nexport default class home extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className='home'>\r\n        <TopBar />\r\n        <Tabs\r\n          tabs={tabs}\r\n          initialPage={0}\r\n          tabBarBackgroundColor='#d44439'\r\n          tabBarInactiveTextColor='#e4e4e4'\r\n          tabBarActiveTextColor='#f1f1f1'\r\n          swipeable={true}\r\n          prerenderingSiblingsNumber={false}\r\n        >\r\n          <div className='tabBox'>\r\n            <LazyLoading>\r\n              <Recommend />\r\n            </LazyLoading>\r\n            {/* 推荐页面 */}\r\n          </div>\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              height: '100%',\r\n              backgroundColor: '#f2f3f4'\r\n            }}\r\n          >\r\n            <div className='tabBox' id=\"singer\">\r\n              <LazyLoading src=\"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=891174751,554927679&fm=26&gp=0.jpg\">\r\n                <Singer/>\r\n              </LazyLoading>\r\n\r\n              {/* 歌手页面 */}\r\n            </div>\r\n          </div>\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              height: '100%',\r\n              backgroundColor: '#f2f3f4'\r\n            }}\r\n          >\r\n            <div className='tabBox' ref={val => (this.ganking = val)}>\r\n              <LazyLoading>\r\n                <Ranking />\r\n              </LazyLoading>\r\n\r\n              {/* 排行榜页面 */}\r\n            </div>\r\n          </div>\r\n        </Tabs>\r\n        <WhiteSpace />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}
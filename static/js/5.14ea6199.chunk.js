(window["webpackJsonpnetease-music"]=window["webpackJsonpnetease-music"]||[]).push([[5],{243:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l}));var n=a(30),r=a(14);function s(){return Object(r.a)((function(){return Object(n.a)({method:"get",url:"/personalized",params:{t:Date.now()}})}),"/personalized")}function i(e){return Object(r.a)((function(){return Object(n.a)({method:"get",url:"/playlist/detail",params:{id:e,t:Date.now()}})}),"/playlist/detail".concat(Object(r.b)({id:e})))}function l(e){return Object(r.a)((function(){return Object(n.a)({method:"get",url:"/simi/playlist",params:{id:e,t:Date.now()}})}),"/simi/playlist".concat(Object(r.b)({id:e})))}},244:function(e,t,a){"use strict";a(92),a(246)},245:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(1)),r=f(a(3)),s=f(a(4)),i=f(a(5)),l=f(a(6)),c=f(a(22)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),u=f(a(247));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a},p=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.children,r=e.className,s=e.style,i=e.renderHeader,l=e.renderFooter,u=d(e,["prefixCls","children","className","style","renderHeader","renderFooter"]),f=(0,c.default)(t,r);return o.createElement("div",(0,n.default)({className:f,style:s},u),i?o.createElement("div",{className:t+"-header"},"function"===typeof i?i():i):null,a?o.createElement("div",{className:t+"-body"},a):null,l?o.createElement("div",{className:t+"-footer"},"function"===typeof l?l():l):null)}}]),t}(o.Component);t.default=p,p.Item=u.default,p.defaultProps={prefixCls:"am-list"},e.exports=t.default},246:function(e,t,a){},247:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Brief=void 0;var n=d(a(1)),r=d(a(11)),s=d(a(3)),i=d(a(4)),l=d(a(5)),c=d(a(6)),o=d(a(22)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),f=d(a(136));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a},m=t.Brief=function(e){function t(){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return u.createElement("div",{className:"am-list-brief",style:this.props.style},this.props.children)}}]),t}(u.Component),h=function(e){function t(e){(0,s.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=function(e){var t=a.props,n=t.onClick,r=t.platform;if(n&&"android"===r){a.debounceTimeout&&(clearTimeout(a.debounceTimeout),a.debounceTimeout=null);var s=e.currentTarget,i=Math.max(s.offsetHeight,s.offsetWidth),l=e.currentTarget.getBoundingClientRect(),c={width:i+"px",height:i+"px",left:e.clientX-l.left-s.offsetWidth/2+"px",top:e.clientY-l.top-s.offsetWidth/2+"px"};a.setState({coverRippleStyle:c,RippleClicked:!0},(function(){a.debounceTimeout=setTimeout((function(){a.setState({coverRippleStyle:{display:"none"},RippleClicked:!1})}),1e3)}))}n&&n(e)},a.state={coverRippleStyle:{display:"none"},RippleClicked:!1},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentWillUnmount",value:function(){this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null)}},{key:"render",value:function(){var e,t,a,s=this,i=this.props,l=i.prefixCls,c=i.className,d=i.activeStyle,m=i.error,h=i.align,v=i.wrap,y=i.disabled,b=i.children,g=i.multipleLine,O=i.thumb,k=i.extra,C=i.arrow,x=i.onClick,w=p(i,["prefixCls","className","activeStyle","error","align","wrap","disabled","children","multipleLine","thumb","extra","arrow","onClick"]),j=(w.platform,p(w,["platform"])),E=this.state,S=E.coverRippleStyle,N=E.RippleClicked,_=(0,o.default)(l+"-item",c,(e={},(0,r.default)(e,l+"-item-disabled",y),(0,r.default)(e,l+"-item-error",m),(0,r.default)(e,l+"-item-top","top"===h),(0,r.default)(e,l+"-item-middle","middle"===h),(0,r.default)(e,l+"-item-bottom","bottom"===h),e)),P=(0,o.default)(l+"-ripple",(0,r.default)({},l+"-ripple-animate",N)),M=(0,o.default)(l+"-line",(t={},(0,r.default)(t,l+"-line-multiple",g),(0,r.default)(t,l+"-line-wrap",v),t)),T=(0,o.default)(l+"-arrow",(a={},(0,r.default)(a,l+"-arrow-horizontal","horizontal"===C),(0,r.default)(a,l+"-arrow-vertical","down"===C||"up"===C),(0,r.default)(a,l+"-arrow-vertical-up","up"===C),a)),H=u.createElement("div",(0,n.default)({},j,{onClick:function(e){s.onClick(e)},className:_}),O?u.createElement("div",{className:l+"-thumb"},"string"===typeof O?u.createElement("img",{src:O}):O):null,u.createElement("div",{className:M},void 0!==b&&u.createElement("div",{className:l+"-content"},b),void 0!==k&&u.createElement("div",{className:l+"-extra"},k),C&&u.createElement("div",{className:T,"aria-hidden":"true"})),u.createElement("div",{style:S,className:P})),D={};return Object.keys(j).forEach((function(e){/onTouch/i.test(e)&&(D[e]=j[e],delete j[e])})),u.createElement(f.default,(0,n.default)({},D,{disabled:y||!x,activeStyle:d,activeClassName:l+"-item-active"}),H)}}]),t}(u.Component);h.defaultProps={prefixCls:"am-list",align:"middle",error:!1,multipleLine:!1,wrap:!1,platform:"ios"},h.Brief=m,t.default=h},258:function(e,t,a){"use strict";a(92),a(93),a(259)},259:function(e,t,a){},260:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(1)),r=m(a(11)),s=m(a(3)),i=m(a(4)),l=m(a(5)),c=m(a(6)),o=m(a(22)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),f=m(a(136)),d=m(a(261)),p=m(a(65));function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,s.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=function(){var e=a.props,t=e.disabled,n=e.onChange;if(!t){var r=a.state.selected;a.setState({selected:!r},(function(){n&&n(!r)}))}},a.onTagClose=function(){a.props.onClose&&a.props.onClose(),a.setState({closed:!0},a.props.afterClose)},a.state={selected:e.selected,closed:!1},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.selected!==e.selected&&this.setState({selected:e.selected})}},{key:"render",value:function(){var e,t=this.props,a=t.children,s=t.className,i=t.prefixCls,l=t.disabled,c=t.closable,m=t.small,h=t.style,v=(0,o.default)(s,i,(e={},(0,r.default)(e,i+"-normal",!l&&(!this.state.selected||m||c)),(0,r.default)(e,i+"-small",m),(0,r.default)(e,i+"-active",this.state.selected&&!l&&!m&&!c),(0,r.default)(e,i+"-disabled",l),(0,r.default)(e,i+"-closable",c),e)),y=!c||l||m?null:u.createElement(f.default,{activeClassName:i+"-close-active"},u.createElement("div",{className:i+"-close",role:"button",onClick:this.onTagClose,"aria-label":"remove tag"},u.createElement(p.default,{type:"cross-circle",size:"xs","aria-hidden":"true"})));return this.state.closed?null:u.createElement("div",(0,n.default)({},(0,d.default)(this.props),{className:v,onClick:this.onClick,style:h}),u.createElement("div",{className:i+"-text"},a),y)}}]),t}(u.Component);t.default=h,h.defaultProps={prefixCls:"am-tag",disabled:!1,selected:!1,closable:!1,small:!1,onChange:function(){},onClose:function(){},afterClose:function(){}},e.exports=t.default},261:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).reduce((function(t,a){return"aria-"!==a.substr(0,5)&&"data-"!==a.substr(0,5)&&"role"!==a||(t[a]=e[a]),t}),{})},e.exports=t.default},262:function(e,t,a){},296:function(e,t,a){"use strict";a.r(t);a(258);var n=a(260),r=a.n(n),s=a(45),i=a.n(s),l=a(64),c=a(36),o=a(37),u=a(39),f=a(38),d=a(40),p=(a(244),a(245)),m=a.n(p),h=a(0),v=a.n(h),y=(a(262),a(30)),b=a(14);function g(e){return Object(b.a)((function(){return Object(y.a)({method:"get",url:"/search",params:{keywords:e,t:Date.now()}})}),"/search")}var O=a(96),k=a(243),C=a(34),x=a(95);a.d(t,"default",(function(){return S}));var w=m.a.Item,j=w.Brief,E=null,S=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={boxStyle:{},key:"",searchList:[],singerData:{},playlists:[],searchHot:JSON.parse(window.localStorage.getItem("searchHot")||"[]")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t=C.a.searchData.getState();e.setState({boxStyle:{transform:"translateX(0)"},key:t}),t.trim().length>0&&e.searchMusic(t.trim())}),0),document.getElementById("input").focus(),setTimeout((function(){e.search.style.backgroundColor="#f3f3f4"}),300),0===this.state.searchHot.length&&this.getSearchHot()}},{key:"getSearchHot",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.a)((function(){return Object(y.a)({method:"get",url:"/search/hot",params:{t:Date.now()}})}),"/search");case 3:t=e.sent,this.setState({searchHot:t.result.hots}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){var t=this,a=e.target.value;this.setState({key:a}),E&&clearInterval(E),E=setTimeout((function(){clearInterval(E),a.trim().length>0?t.searchMusic(a.trim()):t.setState({searchList:[]})}),500)}},{key:"searchMusic",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.a.searchData.dispatch(Object(x.c)(t)),e.prev=1,e.next=4,g(t);case 4:a=e.sent,this.getPlaylist(a.result.songs[0].id),this.getSingerDesc(a.result.songs[0].artists[0].id),this.setState({searchList:a.result.songs}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getSingerDesc",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(O.a)(t);case 3:return a=e.sent,this.setState({singerData:a.artist}),e.abrupt("return",a.artist);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getPlaylist",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(k.c)(t);case 3:a=e.sent,this.setState({playlists:a.playlists}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"play",value:function(e,t,a){try{var n=[];e.forEach((function(e,t){n.push({id:e.id,name:e.name,arName:e.artists[0].name,artId:e.artists[Math.floor(Math.random()*e.artists.length)].id})})),C.a.musicUrl.dispatch(Object(x.b)({list:n,index:t,even:a}))}catch(r){console.log(r)}}},{key:"addsearchHot",value:function(){var e=this.state.key,t=this.state.searchHot,a=this.state.searchHot.map((function(e){return e.first}));a.includes(e)?t.splice(a.indexOf(e),1):t.pop(),t.unshift({first:e}),window.localStorage.setItem("searchHot",JSON.stringify(t)),this.setState({searchHot:t})}},{key:"render",value:function(){var e=this;return v.a.createElement("div",{className:"search",ref:function(t){return e.search=t}},v.a.createElement("div",{className:"box",ref:function(t){return e.box=t},style:this.state.boxStyle},this.state.searchList.length>0&&v.a.createElement("div",{className:"content"},v.a.createElement("div",{className:"singer"},v.a.createElement("div",{className:"title"},"\u76f8\u5173\u6b4c\u624b"),v.a.createElement(w,{thumb:this.state.singerData.picUrl,onClick:function(){e.addsearchHot(),e.props.history.push("/singerDetails/".concat(e.state.singerData.id))}},this.state.singerData.name)),v.a.createElement("div",{className:"songMenuList"},v.a.createElement("div",{className:"title"},"\u76f8\u5173\u6b4c\u5355"),v.a.createElement(m.a,null,this.state.playlists.map((function(t,a){return v.a.createElement(w,{key:a,thumb:t.coverImgUrl,onClick:function(){e.addsearchHot(),e.props.history.push("/songMenu/"+t.id)}},t.name)})))),v.a.createElement("div",{className:"songList"},v.a.createElement(m.a,null,this.state.searchList.map((function(t,a){return v.a.createElement(w,{onClick:function(t){e.addsearchHot(),e.play(e.state.searchList,a,t)},key:a},t.name,v.a.createElement(j,null,t.artists[0].name," - ",t.album.name))}))))),0===this.state.searchList.length&&v.a.createElement("div",{className:"hotKey"},v.a.createElement("div",{className:"title"},"\u70ed\u95e8\u641c\u7d22"),v.a.createElement("div",{className:"content"},this.state.searchHot.map((function(t,a){return v.a.createElement(r.a,{"data-seed":"logId",key:a},v.a.createElement("div",{onClick:function(){e.searchMusic(t.first),e.input.value=t.first,e.setState({key:t.first})}},t.first))}))))),v.a.createElement("div",{className:"searchBar",style:this.state.boxStyle},v.a.createElement("i",{className:"iconfont icon-xiangzuojiantou",onClick:function(){e.search.style.backgroundColor="",e.setState({boxStyle:{transform:"translateX(100%)"}}),setTimeout((function(){e.props.history.go(-1)}),300)}}),v.a.createElement("input",{type:"text",id:"input",placeholder:"\u641c\u7d22\u6b4c\u66f2\u3001\u6b4c\u624b\u3001\u4e13\u8f91",ref:function(t){return e.input=t},value:this.state.key,onChange:function(t){return e.onChange(t)}}),this.state.key.trim().length>0&&v.a.createElement("i",{className:"iconfont icon-guanbi",onClick:function(){e.input.value="",e.setState({key:""}),e.setState({searchList:[]})}})))}}]),t}(v.a.Component)}}]);
//# sourceMappingURL=5.14ea6199.chunk.js.map
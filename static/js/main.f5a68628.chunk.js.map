{"version":3,"sources":["utils/apiCache.js","api/music.js","utils/myToast.js","view/playMusic/index.jsx","utils/playAnimation.js","components/Loading/index.jsx","App.js","serviceWorker.js","index.js","redux/actionType.js","utils/request.js","redux/index.js","redux/reducers.js","utils/throttle.js","redux/actionCreator.js","api/singer.js"],"names":["apiCache","fun","url","apiData","store","setApi","getState","Promise","resolve","dispose","obj","apiUrl","key","JSON","stringify","getMusicUrl","id","request","method","params","t","Date","now","getMusicLyc","myToast","msg","tiem","type","popup","document","createElement","innerText","body","append","style","position","opacity","left","textAlign","top","transform","setTimeout","zIndex","transition","padding","backgroundColor","color","borderRadius","removeChild","playMusic","state","isPlay","musicUrl","show","musicList","index","preIndex","picUrl","musicName","musicAr","playLength","current","end","platPattern","lycArr","currentLyric","isShowLyc","isShowAllTool","popupShow","isTouchDown","window","addEventListener","event","x","changedTouches","clientX","progressBox","offsetLeft","setProgress","subscribe","data","e","root","getElementById","ico","className","pageY","pageX","screen","height","fontSize","playAnimation","even","setState","list","setMusicUrl","lyric","arr","split","lyricArr","i","length","timeStr","match","substring","str","replace","timeArr","j","push","time","Number","sort","a","b","this","initPlay","progress","width","res","name","MusicChange","audio","play","getSingerDesc","artId","arName","lyc","lyricDispose","lrc","console","log","_this","pause","allLyc","paddingTop","offsetHeight","size","lycBox","innerWidth","plate","getElementsByClassName","display","tool","ended","currentTime","duration","Math","floor","m","toString","s","padStart","percentage","offsetWidth","lycBrief","rem","artist","_index","random","lengthList","scrollToRow","item","onClick","bottom","backgroundImage","showAll","ref","val","img","src","alt","Playing","showPopup","onTimeUpdate","timeupdate","autoPlay","controls","loop","onPlaying","onPause","unShowAll","map","onTouchStart","progressClick","onTouchEnd","setMucTiem","visible","onClose","animationType","rowCount","rowHeight","rowRenderer","bind","scrollToAlignment","React","Component","Loading","loading","hide","SongMenu","lazy","SingerDetails","Search","Home","setWidth","prototype","$width","setRem","html","getElementsByTagName","parseFloat","throttle","App","fallback","path","component","Boolean","location","hostname","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister","SET_MUC_DATA","SET_SEARCH_DATA","SET_API","axios","create","baseURL","defaults","transformResponse","interceptors","use","config","err","reject","response","parse","dispatch","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","action","applyMiddleware","thunk","searchData","tempObj","rest","itemID","clearInterval","setMucData","setSearchData","singerType","cat","initial","getSongList"],"mappings":"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","file":"static/js/main.f5a68628.chunk.js","sourcesContent":["import store from '../redux'\r\n\r\nexport function apiCache(fun, url) {\r\n  let apiData = store.setApi.getState()\r\n  if (url in apiData) {\r\n    return Promise.resolve(apiData[url])\r\n  } else {\r\n    return fun()\r\n  }\r\n}\r\n\r\nexport function dispose(obj) {\r\n  let apiUrl = ''\r\n  for (let key in obj) {\r\n    if (key !== 't') {\r\n        apiUrl += `/${key}:${JSON.stringify(obj[key])}`\r\n    }\r\n  }\r\n  return apiUrl\r\n}\r\n\r\n","import request from '../utils/request'\r\nimport { apiCache, dispose } from '../utils/apiCache'\r\n\r\nfunction getMusicUrl(id) {\r\n  return apiCache(() => {\r\n    return request({\r\n      method: 'get',\r\n      url: '/song/url',\r\n      params: {\r\n        id,\r\n        t: Date.now()\r\n      }\r\n    })\r\n  }, `/song/url${dispose({ id })}`)\r\n}\r\nfunction getMusicLyc(id) {\r\n  return apiCache(() => {\r\n    return request({\r\n      method: 'get',\r\n      url: '/lyric',\r\n      params: {\r\n        id,\r\n        t: Date.now()\r\n      }\r\n    })\r\n  }, `/lyric${dispose({ id })}`)\r\n}\r\n\r\nexport { getMusicUrl, getMusicLyc }\r\n","function myToast(msg, tiem = 3000, type) {\r\n    let popup = document.createElement('div');\r\n    popup.innerText = msg;\r\n    document.body.append(popup);\r\n    popup.style.position = 'fixed';\r\n    popup.style.opacity = 0;\r\n    popup.style.left = '50%';\r\n    popup.style.textAlign='center';\r\n    switch (type) {\r\n        case 'top':\r\n            popup.style.top = '-5%';\r\n            popup.style.transform = 'translateX(-50%)';\r\n            setTimeout(() => {\r\n                popup.style.top = '2%';\r\n            }, 0);\r\n            break;\r\n        case 'bottom':\r\n            popup.style.top = '110%';\r\n            popup.style.transform = 'translateX(-50%)';\r\n            setTimeout(() => {\r\n                popup.style.top = '90%';\r\n            }, 0);\r\n            break;\r\n        default:\r\n            popup.style.top = '50%';\r\n            popup.style.transform = 'translateX(-50%) translateY(-50%)';\r\n            break;\r\n    }\r\n    popup.style.zIndex = 99999999999;\r\n    popup.style.transition = 'all .5s';\r\n    popup.style.padding = '8px 10px';\r\n    popup.style.backgroundColor = 'rgba(0,0,0,.7)';\r\n    popup.style.color = '#fff';\r\n    popup.style.borderRadius = '5px';\r\n    setTimeout(() => {\r\n        popup.style.opacity = 1;\r\n    }, 0);\r\n    setTimeout(() => {\r\n        popup.style.opacity = 0;\r\n    }, tiem);\r\n    setTimeout(() => {\r\n        document.body.removeChild(popup);\r\n    }, tiem + 500);\r\n}\r\nexport default myToast;\r\n","import React from 'react'\r\nimport './index.scss'\r\nimport { Icon, Modal } from 'antd-mobile'\r\nimport { getMusicUrl, getMusicLyc } from '../../api/music'\r\nimport { getSingerDesc } from '../../api/singer'\r\nimport { playAnimation } from '../../utils/playAnimation'\r\nimport { AutoSizer, List } from 'react-virtualized'\r\nimport store from '../../redux'\r\nimport myToast from '../../utils/myToast'\r\n\r\nexport default class playMusic extends React.Component {\r\n  state = {\r\n    isPlay: false,\r\n    musicUrl: '',\r\n    show: 0,\r\n    musicList: [],\r\n    index: 0,\r\n    preIndex: null,\r\n    picUrl: '',\r\n    musicName: '',\r\n    musicAr: '',\r\n    playLength: {\r\n      current: 0,\r\n      end: 0\r\n    },\r\n    platPattern: 'listCycle',\r\n    lycArr: null,\r\n    currentLyric: null,\r\n    isShowLyc: false,\r\n    isShowAllTool: false,\r\n    popupShow: false,\r\n    isTouchDown: false\r\n  }\r\n  componentDidMount() {\r\n    window.addEventListener('touchmove', event => {\r\n      if (!this.state.isTouchDown) {\r\n        return\r\n      }\r\n      var x = event.changedTouches[0].clientX - this.progressBox.offsetLeft\r\n      this.setProgress(x)\r\n    })\r\n    store.musicUrl.subscribe(() => {\r\n      let data = store.musicUrl.getState()\r\n      playAnimation(data.even)\r\n      this.setState({ musicList: data.list }, () => {\r\n        this.setState({ index: data.index }, () => {\r\n          this.setMusicUrl()\r\n        })\r\n      })\r\n    })\r\n  }\r\n  //把歌词文本处理成合适的数组\r\n  lyricDispose(lyric) {\r\n    let arr = lyric.split('\\n') //把歌词用/n分割成数组\r\n    let lyricArr = []\r\n    for (let i = 0; i < arr.length; i++) {\r\n      if (!arr[i]) break\r\n      let timeStr = arr[i].match(/\\[.*\\]/g)[0] //获取时间字符串\r\n      timeStr = timeStr.substring(1, timeStr.length - 1)\r\n      let str = arr[i].replace(/\\[.*\\]/g, '') //截取歌词字符串\r\n      let timeArr = timeStr.split('][') //截取时间字符串,并且把同一项的多个时间分割成数组\r\n      for (let j = 0; j < timeArr.length; j++) {\r\n        //遍历时间数组\r\n        lyricArr.push({\r\n          time: Number(timeArr[j].split(':')[1]) + Number(timeArr[j].split(':')[0]) * 60,\r\n          str\r\n        }) //把每一个时间和对应的歌词push到数组中\r\n      }\r\n    }\r\n    return lyricArr.sort((a, b) => {\r\n      return a.time - b.time\r\n    }) //把数组按照时间大小排序并返回\r\n  }\r\n  //设置音乐url\r\n  async setMusicUrl() {\r\n    let { index } = this.state\r\n    let initPlay = this.state.musicUrl ? false : true\r\n    this.setState({ musicUrl: '' })\r\n    this.progress.style.width = ''\r\n    try {\r\n      var res = await getMusicUrl(this.state.musicList[index].id)\r\n      if (res.data[0].url === null) {\r\n        myToast(`歌曲《${this.state.musicList[index].name}》暂无版权,播放失败!`, 2000)\r\n        this.MusicChange(1)\r\n        return\r\n      }\r\n      this.setState({ musicUrl: res.data[0].url }, () => {\r\n        if (!initPlay) {\r\n          this.audio.play()\r\n        }\r\n        if (this.state.show === 0) {\r\n          this.setState({ show: 60/37.5+'rem' })\r\n        }\r\n      })\r\n      this.getSingerDesc(this.state.musicList[index].artId)\r\n      this.setState({\r\n        musicName: this.state.musicList[index].name\r\n      })\r\n      this.setState({\r\n        musicAr: this.state.musicList[index].arName\r\n      })\r\n      let lyc = await getMusicLyc(this.state.musicList[index].id)\r\n      if ('lrc' in lyc) {\r\n        this.setState({ lycArr: this.lyricDispose(lyc.lrc.lyric) })\r\n      } else {\r\n        this.setState({ lycArr: '' })\r\n      }\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n  // 点击播放或暂停按钮\r\n  Playing(_this) {\r\n    let audio = document.getElementById('audio')\r\n    if (this.state.isPlay) {\r\n      audio.pause()\r\n    } else {\r\n      audio.play()\r\n    }\r\n  }\r\n  // 显示详细播放模块\r\n  showAll(_this) {\r\n    _this.setState({ show: '100%' }, () => {\r\n      setTimeout(() => {\r\n        this.setState({ isShowAllTool: true }, () => {\r\n          this.allLyc.style.paddingTop = this.allLyc.offsetHeight / 2 - 40 + 'px'\r\n          let size =\r\n            this.lycBox.offsetHeight - 90 > window.innerWidth - 60\r\n              ? window.innerWidth - 60\r\n              : this.lycBox.offsetHeight - 90\r\n          this.plate.style.width = size + 'px'\r\n          this.plate.style.height = size + 'px'\r\n        })\r\n      }, 600)\r\n    })\r\n    let tool = document.getElementsByClassName('tool')[0]\r\n    tool.style.display = 'none'\r\n  }\r\n  // 隐藏详细播放模块\r\n  unShowAll(_this) {\r\n    _this.setState({ show:  60/37.5+'rem', isShowAllTool: false })\r\n    let tool = document.getElementsByClassName('tool')[0]\r\n    tool.style.display = 'flex'\r\n    tool.style.opacity = 0\r\n    setTimeout(() => {\r\n      tool.style.opacity = 1\r\n    }, 0)\r\n  }\r\n  //当音乐播放时\r\n  timeupdate(_this) {\r\n    let audio = document.getElementById('audio')\r\n    // 是否播放结束\r\n    if (audio.ended && this.state.platPattern !== 'singleCycle') {\r\n      this.MusicChange(1)\r\n      return\r\n    }\r\n    if (!this.state.isShowAllTool) {\r\n      return\r\n    }\r\n    let currentTime = '0:00'\r\n    let duration = '0:00'\r\n    if (audio.currentTime > 0) {\r\n      currentTime = Math.floor(audio.currentTime)\r\n      let m = Math.floor(currentTime / 60).toString()\r\n      let s = (currentTime % 60).toString()\r\n      currentTime = `${m}:${s.padStart(2, '0')}`\r\n    }\r\n    if (audio.duration > 0) {\r\n      duration = Math.floor(audio.duration)\r\n      let m = Math.floor(duration / 60).toString()\r\n      let s = (duration % 60).toString()\r\n      duration = `${m}:${s.padStart(2, '0')}`\r\n    }\r\n    _this.setState({\r\n      playLength: {\r\n        current: currentTime,\r\n        end: duration\r\n      }\r\n    })\r\n    if (!this.state.isTouchDown) {\r\n      let percentage = audio.currentTime / audio.duration\r\n      this.progress.style.width = percentage * this.progressBox.offsetWidth + 'px'\r\n    }\r\n    if (this.state.lycArr) {\r\n      // 调整歌词显示\r\n      let current = audio.currentTime + 0.3 //获取当前播放时间\r\n      for (let i = this.state.lycArr.length - 1; i >= 0; i--) {\r\n        //倒序遍历歌词数组\r\n        if (this.state.lycArr[i].time < current) {\r\n          if (this.state.currentLyric !== i) {\r\n            //数组下标i的时间小于当前时间时,设置当前显示的歌词为歌词数组的下标i\r\n            this.lycBrief.innerText = this.state.lycArr[i].str\r\n            this.allLyc.style.top = -i * 50 * this.rem + 'px'\r\n          }\r\n          this.setState({ currentLyric: i }) //设置当前显示的歌词下标\r\n          return //退出循环\r\n        }\r\n      }\r\n      // 如果上面循环未有结果,设置当前显示歌词为空,歌词滚动到初始位置\r\n      this.setState({ currentLyric: null })\r\n      this.allLyc.style.top = 50 * this.rem + 'px'\r\n    }\r\n  }\r\n  // 获取歌手详情设置专辑封面\r\n  async getSingerDesc(id) {\r\n    try {\r\n      let res = await getSingerDesc(id)\r\n      this.setState({\r\n        picUrl: res.artist.picUrl\r\n      })\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n  //单首音乐播放完毕\r\n  MusicChange(index) {\r\n    var _index = null\r\n    switch (this.state.platPattern) {\r\n      case 'listCycle':\r\n      case 'singleCycle': {\r\n        if (index === 1) {\r\n          if (this.state.index !== this.state.musicList.length - 1) {\r\n            _index = this.state.index + 1\r\n          } else {\r\n            _index = 0\r\n          }\r\n        }\r\n        if (index === -1) {\r\n          if (this.state.index !== 0) {\r\n            _index = this.state.index - 1\r\n          } else {\r\n            _index = this.state.musicList.length - 1\r\n          }\r\n        }\r\n        this.setState({ index: _index }, () => {\r\n          this.setMusicUrl()\r\n        })\r\n        break\r\n      }\r\n      case 'random': {\r\n        _index = Math.floor(Math.random() * this.state.musicList.length)\r\n        this.setState({ index: _index }, () => {\r\n          this.setMusicUrl()\r\n        })\r\n        break\r\n      }\r\n      default: {\r\n        break\r\n      }\r\n    }\r\n  }\r\n  // 显示音乐列表弹出层\r\n  showPopup() {\r\n    this.setState(\r\n      {\r\n        popupShow: !this.state.popupShow\r\n      },\r\n      () => {\r\n        setTimeout(() => {\r\n          if (this.state.popupShow) {\r\n            this.lengthList.scrollToRow(this.state.index)\r\n          }\r\n        }, 200)\r\n      }\r\n    )\r\n  }\r\n  // 点击进度条\r\n  progressClick(clientX) {\r\n    this.setProgress(clientX - this.progressBox.offsetLeft)\r\n  }\r\n  // 设置进度条\r\n  setProgress(x) {\r\n    this.progress.style.width = x + 'px'\r\n  }\r\n  // 设置播放时间\r\n  setMucTiem() {\r\n    if (!this.state.isPlay) {\r\n      return\r\n    }\r\n    let percentage = this.progress.offsetWidth / this.progressBox.offsetWidth\r\n    if (percentage < 0.04) {\r\n      percentage = 0\r\n    }\r\n    this.audio.currentTime = this.audio.duration * percentage\r\n  }\r\n\r\n  // 渲染长列表行\r\n  rowRenderer({ index, style, key }) {\r\n    let item = this.state.musicList[index]\r\n    return (\r\n      <div\r\n        key={key}\r\n        style={style}\r\n        onClick={() =>\r\n          this.setState({ index }, () => {\r\n            this.setMusicUrl()\r\n          })\r\n        }\r\n        className='content'\r\n      >\r\n        <span style={{ color: this.state.index === index ? '#d4473e' : '#a09191' }}>\r\n          <i\r\n            className='iconfont icon-bofang'\r\n            style={{\r\n              opacity: this.state.index === index ? 1 : 0\r\n            }}\r\n          />\r\n          {item.name} - {item.arName}\r\n        </span>\r\n        <div className='ico'>\r\n          <i className='iconfont icon-shoucang' />\r\n          <i className='iconfont icon-RectangleCopy' />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  render() {\r\n    const { musicList, isShowAllTool } = this.state\r\n    return (\r\n      <div className='playMusic' style={{ bottom: this.state.show }}>\r\n        <div className='bg'>\r\n          <div className='before' style={{ backgroundImage: `url(${this.state.picUrl})` }}></div>\r\n        </div>\r\n        <div className='tool'>\r\n          <div className='item' onClick={() => this.showAll(this)} ref={val => (this.img = val)}>\r\n            <div className='img'>\r\n              <img src={this.state.picUrl} alt='' />\r\n            </div>\r\n            <div className='text'>\r\n              <p>{this.state.musicName}</p>\r\n              <div>{this.state.musicAr}</div>\r\n            </div>\r\n          </div>\r\n          <div className='btn'>\r\n            <i\r\n              onClick={() => this.Playing(this)}\r\n              className={this.state.isPlay ? 'iconfont icon-zanting' : 'iconfont icon-bofang'}\r\n            />\r\n            <i className='iconfont icon-yinleliebiao' onClick={() => this.showPopup()} />\r\n          </div>\r\n        </div>\r\n        <div className='audio'>\r\n          <audio\r\n            onTimeUpdate={() => this.timeupdate(this)}\r\n            autoPlay\r\n            controls\r\n            src={this.state.musicUrl}\r\n            id='audio'\r\n            loop={this.state.platPattern === 'singleCycle'}\r\n            ref={val => (this.audio = val)}\r\n            onPlaying={() => {\r\n              this.setState({ isPlay: true })\r\n            }}\r\n            onPause={() => {\r\n              this.setState({ isPlay: false })\r\n            }}\r\n          />\r\n        </div>\r\n        <div className='all'>\r\n          <div className='toolBox' style={{ opacity: isShowAllTool ? 1 : 0, transition: 'all .5s' }}>\r\n            {isShowAllTool && (\r\n              <>\r\n                <div className='topBox'>\r\n                  <Icon type='down' onClick={() => this.unShowAll(this)} />\r\n                  <div className='title'>{this.state.musicName}</div>\r\n                  <div className='singer'>{this.state.musicAr}</div>\r\n                </div>\r\n                <div\r\n                  className='lycBox'\r\n                  ref={val => (this.lycBox = val)}\r\n                  onClick={() => this.setState({ isShowLyc: !this.state.isShowLyc })}\r\n                >\r\n                  <div\r\n                    className='plate'\r\n                    style={{\r\n                      opacity: this.state.isShowLyc ? 0 : 1\r\n                    }}\r\n                    ref={val => (this.plate = val)}\r\n                  >\r\n                    <img src={this.state.picUrl} alt='' />\r\n                  </div>\r\n                  <div className='lycBrief' style={{ opacity: this.state.isShowLyc ? 0 : 1 }}>\r\n                    <p ref={val => (this.lycBrief = val)}></p>\r\n                  </div>\r\n                  <div\r\n                    className='allLyc'\r\n                    style={{ opacity: this.state.isShowLyc ? 1 : 0 }}\r\n                    ref={val => (this.allLyc = val)}\r\n                  >\r\n                    {this.state.lycArr &&\r\n                      this.state.lycArr.map((item, index) => {\r\n                        return (\r\n                          <p key={index} className={index === this.state.currentLyric ? 'current' : ''}>\r\n                            {item.str}\r\n                          </p>\r\n                        )\r\n                      })}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            <div className='allTool'>\r\n              <div className='progressBar'>\r\n                <span>{this.state.playLength.current}</span>\r\n                <div\r\n                  className='progressBox'\r\n                  onTouchStart={e => {\r\n                    const clientX = e.changedTouches[0].clientX\r\n                    this.setState({ isTouchDown: true }, () => this.progressClick(clientX))\r\n                  }}\r\n                  onTouchEnd={() => {\r\n                    setTimeout(() => {\r\n                      this.setMucTiem()\r\n                      this.setState({ isTouchDown: false })\r\n                    }, 0)\r\n                  }}\r\n                >\r\n                  <div ref={val => (this.progressBox = val)}>\r\n                    <div className='progress' ref={val => (this.progress = val)}></div>\r\n                  </div>\r\n                </div>\r\n\r\n                <span>{this.state.playLength.end}</span>\r\n              </div>\r\n              <div className='control'>\r\n                {this.state.platPattern === 'listCycle' && (\r\n                  <i\r\n                    className='iconfont icon-icon--'\r\n                    onClick={() => {\r\n                      this.setState({\r\n                        platPattern: 'singleCycle'\r\n                      })\r\n                      myToast('单曲循环', 2000)\r\n                    }}\r\n                  />\r\n                )}\r\n                {this.state.platPattern === 'singleCycle' && (\r\n                  <i\r\n                    className='iconfont icon-danquxunhuan'\r\n                    onClick={() => {\r\n                      this.setState({\r\n                        platPattern: 'random'\r\n                      })\r\n                      myToast('随机播放', 2000)\r\n                    }}\r\n                  />\r\n                )}\r\n                {this.state.platPattern === 'random' && (\r\n                  <i\r\n                    className='iconfont icon-suijibofang'\r\n                    onClick={() => {\r\n                      this.setState({\r\n                        platPattern: 'listCycle'\r\n                      })\r\n                      myToast('顺序播放', 2000)\r\n                    }}\r\n                  />\r\n                )}\r\n                <i className='iconfont icon-shangyishoushangyige' onClick={() => this.MusicChange(-1)} />\r\n                <i\r\n                  onClick={() => this.Playing(this)}\r\n                  className={this.state.isPlay ? 'iconfont icon-zanting' : 'iconfont icon-bofang'}\r\n                />\r\n                <i className='iconfont icon-xiayigexiayishou' onClick={() => this.MusicChange(1)} />\r\n                <i className='iconfont icon-yinleliebiao' onClick={() => this.showPopup()} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Modal popup visible={this.state.popupShow} onClose={() => this.showPopup()} animationType='slide-up'>\r\n          <div className='songListPopup'>\r\n            <div className='box'>\r\n              <div className='title'>\r\n                <div className='left'>\r\n                  {this.state.platPattern === 'listCycle' && (\r\n                    <>\r\n                      <i\r\n                        className='iconfont icon-icon--'\r\n                        onClick={() => {\r\n                          this.setState({\r\n                            platPattern: 'singleCycle'\r\n                          })\r\n                        }}\r\n                      />\r\n                      顺序播放\r\n                    </>\r\n                  )}\r\n                  {this.state.platPattern === 'singleCycle' && (\r\n                    <>\r\n                      <i\r\n                        className='iconfont icon-danquxunhuan'\r\n                        onClick={() => {\r\n                          this.setState({\r\n                            platPattern: 'random'\r\n                          })\r\n                        }}\r\n                      />\r\n                      单曲循环\r\n                    </>\r\n                  )}\r\n                  {this.state.platPattern === 'random' && (\r\n                    <>\r\n                      <i\r\n                        className='iconfont icon-suijibofang'\r\n                        onClick={() => {\r\n                          this.setState({\r\n                            platPattern: 'listCycle'\r\n                          })\r\n                        }}\r\n                      />\r\n                      随机播放\r\n                    </>\r\n                  )}\r\n                </div>\r\n                <i className='iconfont icon-guanbi' onClick={() => this.showPopup()} />\r\n              </div>\r\n              {musicList.length > 0 && (\r\n                <AutoSizer>\r\n                  {({ height, width }) => (\r\n                    <List\r\n                      ref={val => (this.lengthList = val)}\r\n                      width={width} //盒子宽度\r\n                      height={height - 40} //盒子总高度\r\n                      rowCount={musicList.length} //渲染条数\r\n                      rowHeight={40} //每条数据高度\r\n                      rowRenderer={this.rowRenderer.bind(this)} //渲染函数\r\n                      scrollToAlignment='start' //如果徐饶跳转到指定下标位置需要添加 scrollToRow()\r\n                    />\r\n                  )}\r\n                </AutoSizer>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","function playAnimation(e) {\r\n    let root = document.getElementById('root');\r\n    let ico = document.createElement('i');\r\n    ico.className = 'iconfont icon-yinle animation';\r\n    ico.style.top = e.pageY - 5 + 'px';\r\n    ico.style.left = e.pageX - 5 + 'px';\r\n    root.append(ico);\r\n    setTimeout(() => {\r\n        ico.style.top = window.screen.height - 45 + 'px';\r\n        ico.style.left = '8%';\r\n        ico.style.fontSize = '30px'\r\n    }, 0);\r\n    setTimeout(() => {\r\n        ico.style.opacity = 0;\r\n    },1000)\r\n    setTimeout(() => {\r\n        root.removeChild(ico);\r\n    }, 2000);\r\n}\r\n\r\nexport { playAnimation };\r\n","import React from 'react'\r\nimport { Toast} from 'antd-mobile';\r\n\r\nexport default class Loading extends React.Component{\r\n    state = {};\r\n    componentDidMount() {\r\n        Toast.loading('加载中...', 30);\r\n    }\r\n    componentWillUnmount() {\r\n        Toast.hide()\r\n    }\r\n    render() {\r\n        return <img src=\"http://img4.imgtn.bdimg.com/it/u=2007870969,2735994731&fm=26&gp=0.jpg\" width=\"100vw\" height=\"100vh\" alt=\"\"/>\r\n    }\r\n}\r\n\r\n","import React, { lazy, Suspense } from 'react'\r\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom'\r\nimport PlayMusic from './view/playMusic'\r\nimport './APP.scss'\r\nimport throttle from './utils/throttle'\r\nimport Loading from './components/Loading';\r\n\r\nconst SongMenu = lazy(() => import('./view/songMenu'))\r\nconst SingerDetails = lazy(() => import('./view/singerDetails'))\r\nconst Search = lazy(() => import('./view/search'))\r\nconst Home = lazy(() => import('./view/home'))\r\n\r\n// import SongMenu from './view/songMenu'\r\n// import SingerDetails from './view/singerDetails'\r\n// import Search from './view/search'\r\n// import Home from './view/home'\r\n\r\n// 动态修改屏幕宽度\r\nReact.Component.prototype.$width = window.innerWidth\r\nfunction setWidth() {\r\n  React.Component.prototype.$width = window.innerWidth\r\n}\r\nfunction setRem() {\r\n  let html = document.getElementsByTagName('html')[0]\r\n  let innerWidth = window.innerWidth / 10\r\n  innerWidth = innerWidth > 50 ? 50 : innerWidth\r\n  html.style.fontSize = innerWidth + 'px'\r\n  React.Component.prototype.rem = parseFloat(innerWidth / 37.5)\r\n}\r\nsetRem()\r\nwindow.addEventListener('resize', () => {\r\n  throttle(setWidth, 1000)\r\n  throttle(setRem, 100)\r\n})\r\n\r\n\r\n\r\nexport default class App extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className='box'>\r\n        <Suspense fallback={<Loading/>}>\r\n          <Router>\r\n            <Route path='/' component={Home} />\r\n            <Switch>\r\n              <Route path='/songMenu/:id' component={SongMenu} />\r\n              <Route path='/singerDetails/:id' component={SingerDetails} />\r\n              <Route path='/search' component={Search} />\r\n            </Switch>\r\n          </Router>\r\n        </Suspense>\r\n        <PlayMusic />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n\r\n\r\n// antd-mobile UI\r\nimport 'antd-mobile/dist/antd-mobile.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","export const SET_MUC_DATA = 'SET_MUC_DATA'\r\nexport const SET_SEARCH_DATA = 'SET_SEARCH_DATA'\r\nexport const SET_API = 'SET_API'","import axios from 'axios';\r\nimport store from '../redux';\r\nimport {setApi} from '../redux/actionCreator';\r\nimport {dispose} from '../utils/apiCache';\r\n\r\nvar request = axios.create({\r\n    baseURL: 'https://autumnfish.cn'\r\n});\r\n//配置axios全局配置\r\nrequest.defaults.transformResponse = [\r\n    data => {\r\n        return data;\r\n    }\r\n];\r\n\r\n\r\n// 添加请求拦截器\r\nrequest.interceptors.request.use(\r\n    config => {\r\n        return config;\r\n    },\r\n    err => {\r\n        return Promise.reject(err);\r\n    }\r\n);\r\n\r\n// 添加响应拦截器\r\nrequest.interceptors.response.use(\r\n    response => {\r\n        let data = JSON.parse(response.data)\r\n        let apiUrl = response.config.url.split('https://autumnfish.cn')[1]\r\n        apiUrl += dispose(response.config.params)\r\n        store.setApi.dispatch(setApi({[apiUrl]:data}))\r\n        return data;\r\n    },\r\n    err => {\r\n        return Promise.reject(err);\r\n    }\r\n);\r\n\r\nexport default request\r\n","import { createStore, applyMiddleware, compose } from 'redux';\r\n\r\nimport thunk from 'redux-thunk';\r\nimport { musicUrl ,searchData ,setApi} from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = {\r\n    musicUrl: createStore(musicUrl, composeEnhancers(applyMiddleware(thunk))),\r\n    searchData: createStore(searchData, composeEnhancers(applyMiddleware(thunk))),\r\n    setApi: createStore(setApi, composeEnhancers(applyMiddleware(thunk))),\r\n};\r\n\r\nexport default store;","import {SET_MUC_DATA , SET_SEARCH_DATA ,SET_API} from './actionType';\r\n\r\nfunction musicUrl(data, action) {\r\n    switch (action.type) {\r\n        case SET_MUC_DATA:\r\n            return data = action.data;\r\n        default:\r\n            return data;\r\n    }\r\n}\r\n\r\nfunction searchData(data = '', action) {\r\n    switch (action.type) {\r\n        case SET_SEARCH_DATA:\r\n            return data = action.data;\r\n        default:\r\n            return data;\r\n    }\r\n}\r\n\r\nfunction setApi(data = {}, action) {\r\n    switch (action.type) {\r\n        case SET_API:\r\n            let tempObj = {...data}\r\n            tempObj = {...tempObj,...action.data}\r\n            return tempObj;\r\n        default:\r\n            return data;\r\n    }\r\n}\r\n\r\nexport { musicUrl ,searchData ,setApi};\r\n\r\n","\r\n// 参数1: 函数  2:防抖间隔时间   3:函数参数\r\nconst throttle = (fun,tiem,...rest) => {\r\n    if (fun.itemID) return\r\n\r\n    fun.itemID = setTimeout(() => {\r\n        clearInterval(fun.itemID)\r\n        fun.itemID = null\r\n        fun(...rest)\r\n    }, tiem)\r\n}\r\nexport default throttle\r\n","import {SET_MUC_DATA , SET_SEARCH_DATA ,SET_API} from './actionType';\r\n\r\nexport const setMucData = (data) => {\r\n    return {\r\n        type:SET_MUC_DATA,\r\n        data\r\n    }\r\n}\r\n\r\nexport const setSearchData = (data) => {\r\n    return {\r\n        type:SET_SEARCH_DATA,\r\n        data\r\n    }\r\n}\r\nexport const setApi = (data) => {\r\n    return {\r\n        type:SET_API,\r\n        data\r\n    }\r\n}\r\n\r\nexport const addAsync = data => {\r\n    return dispatch => {\r\n        setTimeout(() => {\r\n            dispatch(setMucData(data))\r\n        }, 2000);\r\n    }\r\n}\r\n","import request from '../utils/request'\r\nimport { apiCache, dispose } from '../utils/apiCache'\r\n\r\nfunction singerType({ cat, initial }) {\r\n  return apiCache(() => {\r\n    return request({\r\n      method: 'get',\r\n      url: '/artist/list',\r\n      params: {\r\n        cat,\r\n        initial,\r\n        t: Date.now()\r\n      }\r\n    })\r\n  }, `/artist/list${dispose({ cat, initial })}`)\r\n}\r\n\r\nfunction getSongList({ id }) {\r\n  return apiCache(() => {\r\n    return request({\r\n      method: 'get',\r\n      url: '/artists',\r\n      params: {\r\n        id,\r\n        t: Date.now()\r\n      }\r\n    })\r\n  }, `/artists${dispose({ id })}`)\r\n}\r\n\r\nfunction getSingerDesc(id) {\r\n  return apiCache(() => {\r\n    return request({\r\n      method: 'get',\r\n      url: '/artist/album',\r\n      params: {\r\n        id,\r\n        t: Date.now()\r\n      }\r\n    })\r\n  }, `/artist/album${dispose({ id })}`)\r\n}\r\n\r\nexport { singerType, getSongList, getSingerDesc }\r\n"],"sourceRoot":""}